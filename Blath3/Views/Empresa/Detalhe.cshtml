
@{
    ViewBag.Title = "Empresa";
}
@section scripts{
    @*<script>
            function myMap() {

                var myCenter = new google.maps.LatLng(-22.997347, -43.358138);
                var mapCanvas = document.getElementById("googleMap");
                var mapOptions = { center: myCenter, zoom: 15 };
                var map = new google.maps.Map(mapCanvas, mapOptions);
                var marker = new google.maps.Marker({ position: myCenter });
                marker.setMap(map);


            }
        </script>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCKSYavWd6TxWDIKyaie9rfl45MGDmL1Fk&callback=myMap" async defer></script>*@
}

<div class="container">
    <div class="target-output" data-template-chosen="a"></div>
</div>


<script id="mustacheTempalte_a" type="text/template">
    {{#shows}}

    <div id="View-Empresa" class="item">

        <div class="Titulo">
            <div class="row">
                <div class="col-auto">
                    <div class="imgCard"><img src="/Content/img/{{ImagemUrl}}" alt="" class="imgCard rounded" /></div>
                </div>
                <div class="col-md-10 col pl-0">
                    <h2>{{NomeEmpresa}}</h2>
                    <div class="">
                        <span class="badge badge-success teaser">{{Nota}}</span>
                        <span class="teaser f-verde"><strong>{{AvaliacaoLabel}}</strong> ({{QtdAvaliacoes}} opiniões)</span>
                    </div>

                    <div class="f-verde">
                        <div class="teaser">{{Texto1}}</div>
                        <div class="teaser desktop">{{Texto2}}</div>
                    </div>
                    @*<div><span class="f8r f-verde font-weight-bold">Desenvolvimento de sites</span></div>*@

                </div>
                <div class="col-md-2">

                </div>
            </div>

        </div>

        <!--Tabs -->
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Sobre</a>
            </li>
            @*<li class="nav-item">
                    <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Localização</a>
                </li>*@
            <li class="nav-item">
                <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">Pedido de Orçamento</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="contact-tab" data-toggle="tab" href="#rating" role="tab" aria-controls="rating" aria-selected="false">Avaliações</a>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane py-4 fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                <div class="row">
                    <div class="col-md-auto desktop">
                        <img src="/Content/img/{{ImagemUrl}}" alt="" class="img-detail rounded" />
                    </div>
                    <div class="col-md-8">
                        <h4>{{NomeEmpresa}}</h4>
                        <p>{{DescricaoEmpresa}}</p>

                    </div>
                </div>
            </div>
            @*<div class="tab-pane fade py-4" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                    <div class="row">
                        <div class="col-md-3 pl-0 my-md-0 my-2">
                            <div class="card">
                                <div class="card-header">
                                    Endereço
                                </div>
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item font-weight-bold">
                                        Av. das Américas, 4666 - Barra da Tijuca, Rio de Janeiro - RJ, 22640-102
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-md-9 pl-0">
                            <div class="card">
                                <div class="card-header">
                                    Mapa de localização
                                </div>
                                <div class="card-body">
                                    <div id="googleMap" style="width:100%;height:400px;"></div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>*@

            <!-- Tab - Contact -->
            <div class="tab-pane fade py-4" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                <div class="row">
                    <div class="col-md-3 my-md-0 my-2">
                        <div class="card">
                            <div class="card-header">
                                Área de Atendimento
                            </div>
                            <div class="card-body p-3">
                                <strong>
                                    {{UFAtendimento}} - {{CidadeAtendimento}}
                                </strong>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-9">
                        <div class="card">
                            <div class="card-header">
                                Pedir Orçamento ou Enviar Mensagem
                            </div>
                            <div class="card-body p-3">
                                <form id="Form1" action="#" method="post">


                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="empresaNome">Nome</label>
                                            <input type="text" class="form-control" id="nomeUsuario" placeholder="" value="" required="required" pattern="[0-9]+$">

                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label for="emailEmpresa">Email</label>
                                            <input type="email" class="form-control" id="emailEmpresa" placeholder="" value="" required="required">

                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-12 mb-3">
                                            <label for="empresaNome">Descreva seu pedido</label>
                                            <textarea class="form-control" id="pedidoUsuario" rows="5"></textarea>
                                        </div>
                                    </div>


                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="selQuando">Quando deseja o serviço</label><br />
                                            <select id="selQuando" name="selQuando" class="w-100">
                                                <option value="hoje">Hoje (urgente)</option>
                                                <option value="2">Amanhã</option>
                                                <option value="3">Essa semana</option>
                                                <option value="4">Semana que vem</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label for="">&nbsp;</label><br />
                                            <input type="hidden" id="hidEmpresaIds" />
                                            <button class="btn btn-primary btn-lg w-100">Enviar Pedido</button>
                                        </div>
                                    </div>

                                </form>

                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab - Rating -->
            <div class="tab-pane fade py-4" id="rating" role="tabpanel" aria-labelledby="rating-tab">
                <div class="row">
                    <div class="col-md-2 pl-0 my-md-0 my-2">


                        <div class="text-center p-2">
                            <div class="square-nota m-auto">{{Nota}}</div>
                            
                            <div id="rateYo" class="mt-2" style="margin-left: auto;margin-right:auto;"></div>
                            <div class="font-weight-bold mt-1">
                                {{AvaliacaoLabel}}
                            </div>


                        </div>
                    </div>
                    <div class="col-md-10">


                        <div class="card">
                            <div class="card-header font-weight-bold">
                                Avaliações (Total: {{QtdAvaliacoes}})
                            </div>
                        </div>
                        <!--Avaliacao -->
                        {{#opinioes}}
                        <div class="reg mt-2">
                            <div class="row">
                                <div class="col-3 col-md-1">
                                    <div class="square-nota m-auto">
                                        {{notaUsuario}}
                                    </div>
                                    <div class="descnota">
                                        {{descNotaOpiniao}}
                                    </div>
                                </div>

                                <div class="col-9 col-md-11">
                                    <h6>{{dataOpiniao}} - {{nomeUsuario}}</h6>

                                    <p>
                                        {{textoOpiniao}}
                                    </p>

                                    {{#temResposta}}
                                    <strong>Resposta da empresa:</strong>
                                    <p>
                                        {{respostaEmpresa}}
                                    </p>   
                                     {{/temResposta}}

                                </div>
                            </div>
                        </div>
                        {{/opinioes}}
                        <!--Avaliacao2 -->
                        

                    </div>
                </div>
            </div>
        </div>


    </div>


    {{/shows}}
</script>


<script src="~/Scripts/mustache.min.js"></script>
<script>
    //var targetContainer = $(".target-output"),
    //    templateDefined = $(".target-output").data("template-chosen"),
    //    template = $("#mustacheTempalte_" + templateDefined).html();

    $.get("/api/Empresa/retornarcard/@ViewData["lnkEmp"]", function (result) {
        var targetContainer = $(".target-output"),
            templateDefined = $(".target-output").data("template-chosen"),
            template = $("#mustacheTempalte_" + templateDefined).html();
        //console.log(template);
        var shows = result;

    //    var shows = {
    //    "shows": [
    //        {
    //            "CodeEmpresa": "01",
    //            "ImagemUrl": "empresa1/promo-100.jpg",
    //            "Dominio": "/empresa/detalhe",
    //            "NomeEmpresa": "Elétrica Xptos - 1",
    //            "Nota": "4,5",
    //            "AvaliacaoLabel": "Muito Bom",
    //            "QtdAvaliacoes": "35",
    //            "Texto1": "Há mais de dez anos na área de eletricidade.",
    //            "Texto2": "Agende hoje mesmo uma visita conosco.",
    //            "EmpSubcategorias": "Eletricista",
    //            "DescricaoEmpresa": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer sed laoreet justo. In a dignissim diam. Nullam ut elit elit. Curabitur vel ligula vulputate, feugiat odio ut, efficitur neque. Nunc id turpis ac velit scelerisque placerat. Nunc rhoncus mauris eu enim ultricies tempor. Cras vel finibus nibh. Vestibulum convallis placerat odio at dapibus. Nunc id erat at diam rhoncus tristique. Cras ut neque lobortis mauris interdum volutpat. Suspendisse potenti. Maecenas viverra hendrerit dui in vulputate. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nunc pretium malesuada dictum.",
    //            "CidadeAtendimento": "Rio de Janeiro",
    //            "UFAtendimento": "RJ"

    //        }

    //    ],
    //    "opinioes": [
    //        {
    //            "nomeUsuario": "J. Tavares",
    //            "notaUsuario": "4,9",
    //            "descNotaOpiniao": "Excelente",
    //            "dataOpiniao": "02/06/2018",
    //            "textoOpiniao": "Aenean nec luctus neque. Proin ut rutrum ante. Duis nisl orci, rhoncus at elit eget, scelerisque hendrerit est. Sed facilisis orci eget eros scelerisque, eget vestibulum ex rhoncus. ",
    //            "temResposta": true,
    //            "respostaEmpresa": "dsjhskadjhk sddjash dk sdsad hdsadkasjhd dskdhsa dsd s.dajhd kk."
    //        },
    //        {
    //            "nomeUsuario": "M. Oliveira",
    //            "notaUsuario": "1,4",
    //            "descNotaOpiniao": "Muito ruim",
    //            "dataOpiniao": "02/08/2018",
    //            "textoOpiniao": "Aenean nec luctus neque. Proin ut rutrum ante. Duis nisl orci, rhoncus at elit eget, scelerisque hendrerit est. Sed facilisis orci eget eros scelerisque, eget vestibulum ex rhoncus. ",
    //            "temResposta": false,
    //            "respostaEmpresa": ""
    //        }
    //    ]
    //};

        //
        var html = Mustache.to_html(template, shows);
        $(targetContainer).html(html);

        $(function () {

            var nota = shows.shows.Nota;
            console.log(nota);
            $("#rateYo").rateYo({
                rating: nota.replace(',', '.'),
                readOnly: true
            });

        });
        //var nota = shows.shows[0].Nota;

        //$("#rateYo").rateYo({
        //    rating: nota.replace(',', '.'),
        //    readOnly: true
        //});
        
    });

    //var shows = {
    //    "shows": [
    //        {
    //            "CodeEmpresa": "01",
    //            "ImagemUrl": "empresa1/promo-100.jpg",
    //            "Dominio": "/empresa/detalhe",
    //            "NomeEmpresa": "Elétrica Xpto - 1",
    //            "Nota": "4,5",
    //            "AvaliacaoLabel": "Muito Bom",
    //            "QtdAvaliacoes": "35",
    //            "Texto1": "Há mais de dez anos na área de eletricidade.",
    //            "Texto2": "Agende hoje mesmo uma visita conosco.",
    //            "EmpSubcategorias": "Eletricista",
    //            "DescricaoEmpresa": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer sed laoreet justo. In a dignissim diam. Nullam ut elit elit. Curabitur vel ligula vulputate, feugiat odio ut, efficitur neque. Nunc id turpis ac velit scelerisque placerat. Nunc rhoncus mauris eu enim ultricies tempor. Cras vel finibus nibh. Vestibulum convallis placerat odio at dapibus. Nunc id erat at diam rhoncus tristique. Cras ut neque lobortis mauris interdum volutpat. Suspendisse potenti. Maecenas viverra hendrerit dui in vulputate. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nunc pretium malesuada dictum.",
    //            "CidadeAtendimento": "Rio de Janeiro",
    //            "UFAtendimento": "RJ"

    //        }

    //    ],
    //    "opinioes": [
    //        {
    //            "nomeUsuario": "J. Tavares",
    //            "notaUsuario": "4,9",
    //            "descNotaOpiniao": "Excelente",
    //            "dataOpiniao": "02/06/2018",
    //            "textoOpiniao": "Aenean nec luctus neque. Proin ut rutrum ante. Duis nisl orci, rhoncus at elit eget, scelerisque hendrerit est. Sed facilisis orci eget eros scelerisque, eget vestibulum ex rhoncus. ",
    //            "temResposta": true,
    //            "respostaEmpresa": "dsjhskadjhk sddjash dk sdsad hdsadkasjhd dskdhsa dsd s.dajhd kk."
    //        },
    //        {
    //            "nomeUsuario": "M. Oliveira",
    //            "notaUsuario": "1,4",
    //            "descNotaOpiniao": "Muito ruim",
    //            "dataOpiniao": "02/08/2018",
    //            "textoOpiniao": "Aenean nec luctus neque. Proin ut rutrum ante. Duis nisl orci, rhoncus at elit eget, scelerisque hendrerit est. Sed facilisis orci eget eros scelerisque, eget vestibulum ex rhoncus. ",
    //            "temResposta": false,
    //            "respostaEmpresa": ""
    //        }
    //    ]
    //};

    ////
    //var html = Mustache.to_html(template, shows);
    //$(targetContainer).html(html);
    //var nota = shows.shows[0].Nota;

    //$("#rateYo").rateYo({
    //    rating: nota.replace(',', '.'),
    //    readOnly: true
    //});
    

    


    
//# sourceURL=pen.js
</script>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/rateYo/2.3.2/jquery.rateyo.min.css">
<!-- Latest compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/rateYo/2.3.2/jquery.rateyo.min.js"></script>



